<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TeamHub Dashboard</title>
  <link rel="stylesheet" href="team-lead.css"/>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBQSl1HtlJBPRBcgt5culdCDj_cBVN40Io",
      authDomain: "offer-upload.firebaseapp.com",
      projectId: "offer-upload",
      storageBucket: "offer-upload.firebasestorage.app",
      messagingSenderId: "147934510488",
      appId: "1:147934510488:web:cdf01aed4342a43475bfed",
      measurementId: "G-ZPBL7DC3YG"
    };
    firebase.initializeApp(firebaseConfig);
    window.auth = firebase.auth();
    window.db   = firebase.firestore();
    window.storage = firebase.storage();
  </script>

  <style>
    /* Hide settings panel by default */
    #settings-panel.controls-hidden { display: none; }

    /* Basic grid layout */
    body { margin:0; font-family: Arial,sans-serif; display: grid; grid-template-columns: 250px 1fr; grid-template-rows: auto 1fr; height:100vh; }
    header { grid-column:1/3; background:#2C3E50; color:#FFF; display:flex; align-items:center; justify-content:space-between; padding:0 16px; }
    aside { grid-row:2; background:#ECF0F1; overflow-y:auto; padding:16px; }
    main { grid-row:2; padding:16px; display:flex; flex-direction:column; }

    header .user-info { display:flex; align-items:center; gap:8px; }
    header .user-info button { background:none;border:none;color:#FFF;cursor:pointer; }
    header .search-bar { display:flex; align-items:center; gap:4px; }
    header .search-bar input { padding:4px 8px; }

    /* Notifications */
    #notification-area { margin-top:16px; font-size:14px; }

    /* Chat/Contact controls */
    .sidebar-section { margin-bottom:24px; }
    .sidebar-section h4 { margin-bottom:8px; }

    .sidebar-section .actions button { display:block; width:100%; margin-bottom:4px; }

    /* Chat panel */
    #chat-panel { flex:1; display:flex; flex-direction:column; border:1px solid #CCC; border-radius:4px; overflow:hidden; }
    #chat-header { background:#f5f5f5; padding:8px; display:flex; justify-content:space-between; align-items:center; }
    #chat-messages { flex:1; padding:8px; overflow-y:auto; background:#FAFAFA; }
    .chat-input-area { padding:8px; display:flex; gap:8px; border-top:1px solid #DDD; }
    .chat-input-area textarea { flex:1; padding:6px; resize:none; }
    .chat-input-area button, .chat-input-area label { background:#3498DB; color:#FFF; border:none; padding:6px 12px; cursor:pointer; border-radius:4px; }

    /* File preview & reply preview */
    .file-preview, .reply-preview { background:#FFFBCC; padding:8px; margin:8px 0; border:1px solid #F1C40F; border-radius:4px; display:flex; justify-content:space-between; align-items:center; }
    .file-preview button, .reply-preview button { background:none;border:none;cursor:pointer;font-size:16px; }
  </style>
</head>

<body>
  <!-- TOP BAR -->
  <header>
    <div class="user-info">
      <span id="welcome">Loading‚Ä¶</span>
      <button id="edit-name-btn" title="Change display name">‚úèÔ∏è</button>
      <button id="signout" title="Sign Out">üîí</button>
    </div>
    <div class="search-bar">
      <input type="text" id="offer-search-input" placeholder="Search offers‚Ä¶" />
      <button id="offer-search-btn">üîç</button>
    </div>
  </header>

  <!-- SIDEBAR -->
  <aside>
    <!-- Notifications -->
    <div id="notification-area"></div>

    <!-- Contacts & Forums -->
    <div class="sidebar-section">
      <h4>Chats & Forums</h4>
      <select id="chat-select" style="width:100%;">
        <option value="" selected>No chat selected</option>
      </select>
      <div class="actions">
        <button id="delete-chat-btn">Delete Chat</button>
        <button id="manage-contacts-btn">Manage Contacts</button>
      </div>
    </div>

    <!-- Upload Offers -->
    <div class="sidebar-section">
      <h4>Upload Offers</h4>
      <input type="file" id="file-uploader" multiple accept=".xlsx,.xls,.csv" />
      <button id="add-files-btn" style="margin-top:8px;">Add Files</button>
      <div id="uploaded-files-list" style="margin-top:12px;"></div>
    </div>

    <!-- Notepad controls -->
    <div class="sidebar-section">
      <h4>Notepad</h4>
      <button id="new-file">New Note</button>
      <button id="delete">Delete Note</button>
      <button id="search">Search Notes</button>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main>
    <!-- Announcement Panel -->
    <section id="announcement-panel" style="margin-bottom:16px;">
      <h3>Team Announcement</h3>
      <textarea id="announcement-input" placeholder="Write your announcement‚Ä¶" rows="2" style="width:100%;"></textarea>
      <button id="post-announcement" style="margin-top:8px;">Post</button>
    </section>

    <!-- Chat Panel -->
    <section id="chat-panel">
      <div id="chat-header">
        <span id="chat-title">Select a chat</span>
        <span id="chat-timestamp">‚Äî</span>
      </div>
      <div id="chat-messages"></div>

      <!-- Previews -->
      <div id="selected-file-preview" class="file-preview hidden"></div>
      <div id="reply-preview" class="reply-preview hidden"></div>

      <!-- Input Area -->
      <div class="chat-input-area">
        <label for="chat-file-input">üìé</label>
        <input type="file" id="chat-file-input" style="display:none;" />
        <textarea id="chat-input" placeholder="Type your message‚Ä¶" rows="2"></textarea>
        <button id="send-message-btn">Send</button>
      </div>
    </section>
  </main>

  <!-- JS Modules -->
  <script type="module" src="team-lead.js"></script>
  <script type="module" src="notepad.js"></script>
  <script type="module" src="snap.js"></script>
  <script type="module" src="offers.js"></script>
  <script type="module" src="chat.js"></script>
</body>
</html>
